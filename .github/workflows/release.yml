name: Release
on:
  release:
    types:
      - published
jobs:
  release-image:
    runs-on: ubuntu-20.04
    steps:
      - uses: actions/checkout@v3
      - run: echo "GIT_TAG=`echo $(git describe --tags --abbrev=0)`" >> $GITHUB_ENV
      - run: docker build . -t mahdikhashan/react-learning-path
      - run: docker login -u ${{secrets.DOCKER_USERNAME}} --password ${{secrets.DOCKER_PASSWORD}}
      - run: docker push mahdikhashan/react-learning-path:$GITHUB_ENV